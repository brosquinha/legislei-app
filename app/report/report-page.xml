<Page class="Page" loaded="loadReport">
    <ActionBar title="{{ title }}" class="action-bar">
        <NavigationButton text="Back" android.systemIcon="ic_menu_back"  tap="goBackTo"/>
    </ActionBar>

    <TabView id="reportTabView" visibility="{{ (report === null) ? 'collapsed' : 'visible' }}" tabTextColor="white" selectedTabTextColor="white">
        <TabViewItem title="Parlamentar">
            <StackLayout>
                <!-- <StackLayout orientation="horizontal"> -->
                <GridLayout columns="*, *" margin="3" verticalAlignment="top">
                    <Image col="0" src="{{ report.parlamentar.foto }}" height="150" stretch="aspectFit" loadMode="async" />
                    <StackLayout col="1">
                        <Label class="h3 m-5" text="{{ report.parlamentar.nome }}"></Label>
                        <Label class="h3 m-5" text="{{ report.parlamentar.partido + ' - '+ report.parlamentar.uf }}"></Label>
                        <Label class="h3 m-5" text="{{ formatHouse(report.parlamentar.casa) }}"></Label>
                        <Label class="h3 m-5" text="{{ 'Presença: ' + report.presenca_relativa }}"></Label>
                    </StackLayout>
                <!-- </StackLayout> -->
                </GridLayout>
            </StackLayout>
        </TabViewItem>
        <TabViewItem title="Órgãos">
            <StackLayout>
                <ListView items="{{ report.orgaos }}" height="auto">
                    <ListView.itemTemplate>
                        <StackLayout>
                            <Label text="{{ nome }}" class="m-5 h3"></Label>
                            <Label text="{{ cargo }}" class="m-15 text-left"></Label>
                        </StackLayout>
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </TabViewItem>
        <TabViewItem title="Proposições">
            <StackLayout>
                <Label
                    class="h2 text-center m-15"
                    text="Sem proposições nesse período"
                    visibility="{{ (!report.proposicoes.length) ? 'visible' : 'collapsed' }}"></Label>
                <ListView items="{{ report.proposicoes }}" height="auto">
                    <ListView.itemTemplate>
                        <StackLayout onTap="openProposition" data-url="{{ url_documentos }}">
                            <Label text="{{ tipo + '-' + numero }}" class="m-5 h3"></Label>
                            <Label text="{{ ementa }}" class="m-5" textWrap="true"></Label>
                        </StackLayout>
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </TabViewItem>
        <TabViewItem title="Eventos presentes">
            <StackLayout>
                <Label
                    class="h2 text-center m-15"
                    text="Sem eventos presentes nesse período"
                    visibility="{{ (!report.eventos_presentes.length) ? 'visible' : 'collapsed' }}"></Label>
                <ListView items="{{ report.eventos_presentes }}" height="auto">
                    <ListView.itemTemplate>
                        <StackLayout onTap="showEventDetails" data-id="{{ id }}">
                            <Label text="{{ nome }}" class="m-5 h3"></Label>
                            <Label text="{{ situacao }}" class="m-5" textWrap="true"></Label>
                            <Label text="{{ orgaos[0].apelido }}" class="m-5" textWrap="true"></Label>
                            <Label text="{{ (pautas.length) ? 'Clique para mais informações' : 'Evento sem pauta' }}" class="m-5" textWrap="true"></Label>
                        </StackLayout>
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </TabViewItem>
        <TabViewItem title="Eventos ausentes">
            <StackLayout>
                <Label
                    class="h2 text-center m-15"
                    text="Sem eventos ausentes nesse período"
                    visibility="{{ (!report.eventos_ausentes_filtered.length) ? 'visible' : 'collapsed' }}"></Label>
                <ListView items="{{ report.eventos_ausentes_filtered }}" style="height:90%">
                    <ListView.itemTemplate>
                        <StackLayout>
                            <Label text="{{ nome }}" class="m-5 h3"></Label>
                            <Label text="{{ situacao }}" class="m-5" textWrap="true"></Label>
                        </StackLayout>
                    </ListView.itemTemplate>
                </ListView>
                <Label
                    class="h3 text-center m-15"
                    text="Ver demais eventos da semana"
                    visibility="{{ (report.eventos_ausentes_filtered.length) ? 'visible' : 'collapsed' }}"
                    onTap="listAllEvents"></Label>
            </StackLayout>
        </TabViewItem>
    </TabView>
</Page>